<li class="list-group-item">
  <div id="post_<%= post.id %>">
  
    <% if current_user == post.user %>
      <%= link_to fa_icon("remove"), post_path(post), method: :delete, data: { confirm: 'Deleting post. Are you sure?' }, 
          class: 'small pull-xs-right m-l-1 text-muted' %>
    <% end %>
    
    <p class="small text-muted pull-xs-right"><%= time_ago_in_words post.created_at %> ago</p>
    
    <h6 class="card-title">
      <%= image_tag get_user_avatar_url_for(post.user, :thumb), class: 'avatar-frame m-y-1', width: '40'%>
      <strong><%= link_to "#{post.user.user_name}", profile_path(post.user.user_name), class: 'nav-link' %></strong>
    </h6>
    
    <p class="card-subtitle"><%= post.message %></p>
    
    <hr>
    
    <%= render 'posts/likes', post: post %>

    <div id="comments" class="m-y-1">
    
      <% if post.comments.any? %>
        <% if post.comments.count > 3 %>
          <%= link_to "View all #{post.comments.count} comments", post_comments_path(post),
              remote: true, class: 'more-comments text-muted nav-link small', data: {post_id: "#{post.id}", type: "html"} %>
        <% end %>
        
        <% post.comments.last(3).each do |comment| %>
          <%= render 'comments/comment', post: post, comment: comment %>
        <% end %>
        
      <% end %>
    </div>
    
    <div class="row">
    
      <div id="like_<%= post.id %>" class="col-xs-1">
        <% if current_user.voted_up_on? post %>
          <%= link_to unlike_post_path(post.id), class: 'btn-sm', remote: true do %>
            <i class="fa fa-heart" aria-hidden="true"></i>
          <% end %>
        <% else %>
          <%= link_to like_post_path(post.id), class: 'btn-sm', remote: true do %>
            <i class="fa fa-heart-o" aria-hidden="true"></i>
          <% end %>
        <% end %>
      </div>
      
      <div class="col-xs-11">
        <%= render 'comments/form', post: post, comment: Comment.new %>
      </div>
    </div>
    
  </div>
</li>